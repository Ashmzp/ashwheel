# üîê Environment Variables Setup Guide

## üìç Important: .env vs Coolify Environment Variables

```
.env file          ‚Üí  Local development only (npm run dev)
Coolify UI         ‚Üí  Production deployment
```

**‚ö†Ô∏è .env file is in .gitignore - never pushed to GitHub**

---

## üéØ Step-by-Step: Get Supabase Keys

### Step 1: Deploy Supabase in Coolify

1. Login to Coolify: `http://31.97.235.213:8000`
2. **+ New Resource** ‚Üí **Service** ‚Üí **Supabase**
3. Set domain: `supabase.ashwheel.cloud`
4. Click **Deploy**
5. Wait 5-10 minutes

### Step 2: Get ANON_KEY from Coolify

After Supabase deployment:

1. Click on **Supabase service** in Coolify
2. Go to **"Environment Variables"** tab
3. Find and copy these values:

```
ANON_KEY           ‚Üí  This is your VITE_SUPABASE_ANON_KEY
SERVICE_ROLE_KEY   ‚Üí  This is for admin operations (optional)
JWT_SECRET         ‚Üí  Auto-generated by Coolify
POSTGRES_PASSWORD  ‚Üí  Database password
```

### Step 3: Update Local .env File

Open `.env` file and update:

```env
VITE_SUPABASE_URL=https://supabase.ashwheel.cloud
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3BxcnN0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDUxOTI4MjYsImV4cCI6MTk2MDc2ODgyNn0.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

**Replace with actual ANON_KEY from Coolify!**

---

## üöÄ Production Deployment (Coolify UI)

### When Deploying Ashwheel App in Coolify:

1. Create new Application in Coolify
2. Go to **"Environment Variables"** section
3. Add these variables:

```env
VITE_SUPABASE_URL=https://supabase.ashwheel.cloud
VITE_SUPABASE_ANON_KEY=<PASTE_ANON_KEY_FROM_SUPABASE_SERVICE>
```

**Screenshot Guide:**
```
Coolify UI
‚îî‚îÄ Your Ashwheel App
   ‚îî‚îÄ Environment Variables tab
      ‚îî‚îÄ Click "+ Add"
         ‚îú‚îÄ Key: VITE_SUPABASE_URL
         ‚îú‚îÄ Value: https://supabase.ashwheel.cloud
         ‚îî‚îÄ Click "Save"
      ‚îî‚îÄ Click "+ Add" again
         ‚îú‚îÄ Key: VITE_SUPABASE_ANON_KEY
         ‚îú‚îÄ Value: <paste ANON_KEY>
         ‚îî‚îÄ Click "Save"
```

---

## üîë Understanding Supabase Keys

### ANON_KEY (Public Key)
- ‚úÖ Safe to use in frontend
- ‚úÖ Used for: Login, Signup, Public API calls
- ‚úÖ Row Level Security (RLS) applies
- ‚ö†Ô∏è Limited permissions

### SERVICE_ROLE_KEY (Admin Key)
- ‚ùå NEVER use in frontend
- ‚úÖ Use only in backend/server
- ‚úÖ Bypasses RLS
- ‚ö†Ô∏è Full database access

**For Ashwheel (React frontend), you only need ANON_KEY!**

---

## üìù Complete .env File Template

```env
# Supabase Configuration
VITE_SUPABASE_URL=https://supabase.ashwheel.cloud
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Optional: For admin operations (backend only)
# SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Optional: Direct database connection (if needed)
# DB_HOST=31.97.235.213
# DB_PORT=5432
# DB_NAME=postgres
# DB_USER=postgres
# DB_PASSWORD=<from Coolify>
```

---

## üîÑ Workflow Summary

### Local Development:
```bash
# 1. Update .env file with Supabase keys
# 2. Run dev server
npm run dev

# App will use .env file
```

### Production Deployment:
```bash
# 1. Push code to GitHub (without .env)
git add .
git commit -m "Update"
git push

# 2. Set environment variables in Coolify UI
# 3. Deploy in Coolify
# App will use Coolify environment variables
```

---

## ‚úÖ Verification

### Test Local Setup:
```bash
npm run dev
# Open http://localhost:3000
# Try to login/signup
# Check browser console for errors
```

### Test Production:
```bash
# After deployment
# Open https://ashwheel.cloud
# Try to login/signup
# Check browser console
```

---

## üõ†Ô∏è Troubleshooting

### Error: "Invalid API key"
**Solution:** 
- Verify ANON_KEY is correct
- Check for extra spaces
- Ensure key starts with `eyJ`

### Error: "Failed to fetch"
**Solution:**
- Verify VITE_SUPABASE_URL is correct
- Check if Supabase is running
- Test: `curl https://supabase.ashwheel.cloud/rest/v1/`

### Error: "CORS error"
**Solution:**
- Check Supabase CORS settings
- Verify domain is whitelisted in Supabase

---

## üìã Quick Checklist

**Local Development:**
- [ ] Supabase deployed in Coolify
- [ ] ANON_KEY copied from Coolify
- [ ] .env file updated
- [ ] npm run dev working
- [ ] Login/signup working locally

**Production:**
- [ ] Code pushed to GitHub
- [ ] Ashwheel app created in Coolify
- [ ] Environment variables added in Coolify UI
- [ ] App deployed
- [ ] https://ashwheel.cloud working
- [ ] Login/signup working in production

---

**üéØ Key Point: .env for local, Coolify UI for production!**
